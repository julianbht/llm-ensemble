{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ModelJudgement",
  "description": "Output from a single LLM judge for one query-document pair. Canonical judgement schema that all adapters must produce.",
  "type": "object",
  "required": ["model_id", "provider", "query_id", "docid", "raw_text", "latency_ms"],
  "properties": {
    "model_id": {
      "type": "string",
      "description": "Model identifier (e.g., 'phi3-mini')"
    },
    "provider": {
      "type": "string",
      "description": "Provider name (e.g., 'hf', 'ollama', 'openrouter')"
    },
    "version": {
      "type": ["string", "null"],
      "description": "Model version if available"
    },
    "query_id": {
      "type": "string",
      "description": "Query ID from input JudgingExample"
    },
    "docid": {
      "type": "string",
      "description": "Document ID from input JudgingExample"
    },
    "label": {
      "type": ["integer", "null"],
      "enum": [0, 1, 2, null],
      "description": "Relevance label: 2=highly relevant, 1=relevant/partly helpful, 0=not relevant. null=parsing failed"
    },
    "score": {
      "type": ["number", "null"],
      "minimum": 0.0,
      "maximum": 2.0,
      "description": "Relevance score [0-2]"
    },
    "confidence": {
      "type": ["number", "null"],
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Model self-reported or derived uncertainty"
    },
    "rationale": {
      "type": ["string", "null"],
      "description": "Model's explanation for its judgement"
    },
    "raw_text": {
      "type": "string",
      "description": "Unparsed model output for debugging"
    },
    "latency_ms": {
      "type": "number",
      "description": "Inference time in milliseconds"
    },
    "retries": {
      "type": "integer",
      "minimum": 0,
      "default": 0,
      "description": "Number of retries attempted"
    },
    "cost_estimate": {
      "type": ["number", "null"],
      "description": "Estimated cost in USD"
    },
    "warnings": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": [],
      "description": "Parser warnings, fallbacks, etc."
    }
  }
}
